---
description: Cursor rules derived by SpecStory from the project AI interaction history
globs: *
---

---
description: Cursor rules derived by SpecStory from the project AI interaction history
globs: *
alwaysApply: false
---

## PROJECT OVERVIEW

This project aims to develop an Android Memento Mode application to help users track and manage their screen time with the help of an AI coach.  Key features include app blocking with AI chat to unlock, lifetime screen time calculation, and usage statistics.  Modern Material You design is a primary design goal.  Version updates will be noted in the relevant sections.  Recent progress includes fixing build errors related to missing color and string resources, enhancing navigation with page-by-page functionality, improving UI layout aesthetics and formatting of time units, and setting up resource validation protocols. Material You design implementation was started on 2025-03-28 and involved significant UI updates across multiple screens. Several bugs were fixed related to navigation and missing drawables.  The implementation of Material You design is ongoing.  Additional progress on 2025-03-28 includes implementing Material You design across multiple screens, fixing navigation bugs, and addressing missing drawables.  The Material You implementation is ongoing and involves updating themes, colors, and styles to conform to Material 3 guidelines.  On 2025-03-28, the project name was changed from "App Blocker" to "Memento Mode".  This involved updating all string resources, activity names, and other project references.  The Material You implementation is ongoing.  On 2025-03-28, significant progress was made on implementing Material You design, fixing bugs related to navigation and missing resources, and establishing resource validation protocols. The onboarding module is planned to be enhanced to include a multi-page screentime calculator, an actual usage report, goal setting, and habit replacement features. A splash screen will be added, featuring placeholder login/register buttons and a skip/continue button. The home screen will be redesigned to provide a daily usage summary, progress toward daily goals, time saved, and buttons to update blocked apps, access settings, view usage/progress, and toggle the blocker. A new social screen is planned. On 2025-03-28, significant progress was made on implementing a multi-page onboarding flow including a screentime calculator, a usage report, goal setting, and habit replacement features. A splash screen is planned with placeholder login/register buttons and a skip/continue button.  The home screen will be redesigned to include a daily usage summary, progress towards daily goals, time saved, and relevant buttons/links.  A social screen is planned.  On 2025-03-28, a new onboarding flow was designed to include: a multi-page screentime calculator, an actual usage report, goal setting, and habit replacement features.  A splash screen is planned with placeholder login/register buttons and a skip/continue button. The home screen will be redesigned to include a daily usage summary, progress toward daily goals, time saved, and relevant buttons/links. A social screen is planned.  On 2025-03-28, the project name was changed from "App Blocker" to "Memento Mode". This change involved updating all string resources, activity names, and other project references.  A new splash screen will be added.  The onboarding flow will be updated to include several new features.  The home screen will be significantly redesigned. A new social screen will be added.  The core purpose of the app is to help users reclaim their time by reducing distracting phone usage with the help of an AI coach. The app will focus on encouraging deep work, strengthening meaningful relationships and supporting the users’ personal growth. Upon first installing the app, the user should see a splash screen. In the future, we want to provide the user the option to login or register, so our splash screen should include these buttons. But they will not be functional for now and simply pop up a dialog that says that feature is in development. The only working button should be the one that says Skip / Later / Continue or whatever. After that, the user is taken to the Onboarding module. This enhances on our existing ScreentimeCalculatorActivity. The onboarding flow should include: asking the user how much time they estimate they waste on their phone daily, displaying the rest of the existing screen time calculator activity, introducing an Actual Usage Report, asking the user to select their goal for screen time usage, asking the user how they would like to use the time saved, and finally showing a prominent Call to Action button. After the user clicks this CTA button, we then introduce them to their AI Screentime Coach and guide them through the setup. We describe what our app does and how it can help them with their phone usage. We walk the user through the setup of their first app block on the main screen. We guide them to select the apps to block. Then, we prompt the user for a set of alternative habits or goals they want to develop instead of phone usage. The AI coach will use these goals and habits to deliver personalized guidance and recommendations.  The onboarding is complete and the user is taken to the home screen. The home screen should include: Daily usage summary, Progress toward daily goal, Time saved, Button to update blocked apps, Link to settings, Link to Usage / Progress screen, Button to turn blocker off / on, and Link to new Social screen.  The Usage / Progress Screen will include: Daily, Weekly, Monthly and Yearly Reports, Unlocks Tracking, App and Website Breakdown, and Compare Progress. The Social tab will include: Prompts to engage in meaningful offline activities, Guided challenges, Community section, Accountability, Invite Friends, and Community. The Settings screen will include: Goals and Habits, Notifications and Reminders, and App Preferences.  On 2025-03-28, significant progress was made on fixing build errors related to missing color and string resources, enhancing navigation with page-by-page functionality, improving UI layout aesthetics and formatting of time units, and setting up resource validation protocols.  A new splash screen will be implemented featuring placeholder login/register buttons and a skip/continue button. A multi-page onboarding flow will be implemented, including a screentime calculator, actual usage report, goal setting, and habit replacement features. The home screen will be redesigned.  A new onboarding flow was designed on 2025-03-28. This includes a splash screen (similar to @splash.png), a multi-page screentime calculator, a usage report, goal setting, habit replacement suggestions, and a final call to action.  The home screen will be redesigned to include a daily usage summary, progress towards daily goals, time saved, buttons to update blocked apps, settings, usage/progress, a toggle for the blocker, and a link to a new social screen.  A new onboarding flow is planned, including a splash screen, a multi-page screentime calculator, a usage report, goal setting, and habit replacement features. The home screen will be redesigned, and a new social screen will be added.  On 2025-03-28, the project name was changed to Memento Mode. This involved updating all string resources, activity names, and other project references.  A new splash screen was added.  The core purpose of the app is to help users reclaim their time by reducing distracting phone usage with the help of an AI coach. The app will focus on encouraging deep work, strengthening meaningful relationships and supporting the users’ personal growth. Upon first installing the app, the user should see a splash screen similar to @splash.png.  In the future, we want to provide the user the option of logging in or registering, so our splash screen should include these buttons. But they will not be functional for now and simply pop up a dialog that says that feature is in development. The only working button should be the one that says Skip / Later / Continue or whatever.  The onboarding flow should include: asking the user how much time they estimate they waste on their phone daily, displaying the rest of the existing screen time calculator activity, introducing an Actual Usage Report, asking the user to select their goal for screen time usage, asking the user how they would like to use the time saved, and finally showing a prominent Call to Action button. After the user clicks this CTA button, we then introduce them to their AI Screentime Coach and guide them through the setup. We describe what our app does and how it can help them with their phone usage. We walk the user through the setup of their first app block on the main screen. We guide them to select the apps to block. Then, we prompt the user for a set of alternative habits or goals they want to develop instead of phone usage. The AI coach will use these goals and habits to deliver personalized guidance and recommendations. The onboarding is complete and the user is taken to the home screen. The home screen should include: Daily usage summary, Progress toward daily goal, Time saved, Button to update blocked apps, Link to settings, Link to Usage / Progress screen, Button to turn blocker off / on, and Link to new Social screen. The Usage / Progress Screen will include: Daily, Weekly, Monthly and Yearly Reports, Unlocks Tracking, App and Website Breakdown, and Compare Progress. The Social tab will include: Prompts to engage in meaningful offline activities, Guided challenges, Community section, Accountability, Invite Friends, and Community. The Settings screen will include: Goals and Habits, Notifications and Reminders, and App Preferences.  The project name changed from "App Blocker" to "Memento Mode" on 2025-03-28.  The project was renamed to Memento Mode on 2025-03-28.  The onboarding flow was redesigned on 2025-03-28 to include a splash screen, a multi-page screentime calculator, a usage report, goal setting, and habit replacement features. The home screen will be redesigned.  The onboarding flow was redesigned on 2025-03-28 to include a splash screen, a multi-page screentime calculator, a usage report, goal setting, and habit replacement features. The home screen will be redesigned. On 2025-03-28, a splash screen was added. The onboarding flow was redesigned to include: a multi-page screentime calculator, an actual usage report, goal setting, and habit replacement features. A splash screen was added with placeholder login/register buttons and a skip/continue option. The home screen will be redesigned to include a daily usage summary, progress toward goals, time saved, and relevant buttons/links. A new social feature is planned.  The project name was changed from "App Blocker" to "Memento Mode" on 2025-03-28.  The project was renamed to Memento Mode on 2025-03-28. The onboarding flow was redesigned on 2025-03-28 to include: a splash screen, a multi-page screentime calculator, a usage report, goal setting, and habit replacement features. The home screen will be redesigned.  On 2025-03-29:  Issues identified with coach persona selection:  Multiple selections allowed, inconsistent persona display on home screen, and lack of persona selection in settings.  On 2025-03-29, the following issues were identified and resolved regarding coach persona selection:  Multiple selections were allowed, the persona displayed inconsistently on the home screen, and there was no option to select a persona in settings.  These issues were resolved by using radio buttons for exclusive selection, updating the HomeFragment to consistently display the selected persona, and adding a persona selection option in app settings.  On 2025-03-29, issues related to coach persona selection were resolved.  Specifically, the ability to select multiple personas, inconsistent persona display on the home screen, and the lack of a mechanism to change the persona in app settings were addressed.  These issues were resolved by implementing exclusive radio button selection for persona choice, ensuring consistent persona display across the app, and adding persona selection to app settings. On 2025-03-29, further investigation revealed that the `setupCoachPersonaSelection()` function in `AiCoachSetupActivity.kt` prematurely returns if `viewPager.findViewWithTag<View>("page_4")` is null. This needs to be addressed to ensure proper functionality of coach persona selection.  On 2025-03-29, the issue of previously selected radio buttons remaining visibly selected was addressed.  This was resolved by ensuring that only the RadioButtons within the RadioGroup are used for selection, and that the visual selection in the CardViews is updated to reflect the RadioGroup selection.  This involved adding hidden RadioButtons within the RadioGroup and synchronizing their selection state with their corresponding CardViews. On 2025-03-30: Added a new screen to the AI Coach setup to prompt the user for their name. This updates the user's name in app preferences.  On 2025-03-30: Added 10-12 new habits to the habit selection page of the onboarding flow. These habits are decorated with relevant emojis.  On 2025-03-30: Added simple vector illustrations to the coach persona selection page to enhance visual appeal.  On 2025-03-30: Simplified the top section of the home screen. The initial "Welcome Back" message is now integrated into the AI coach's greeting.  On 2025-03-31: Confirmed that the selected goal hours are saved in the user preferences within `ScreentimeCalculatorActivity.kt`.  On 2025-04-01: Updated goal hour selection in ScreentimeCalculatorActivity.kt to use minutes instead of floats.  The user interface still displays hours, but the underlying data is stored in minutes. The slider step size is now 15 minutes (0.25 hours). On 2025-04-01: The screen time goal slider in settings should use the same 15-minute step size, and the value displayed to the user should be in hours (e.g., 1.50, 1.75, etc.) instead of minutes.  On the home screen, in the goal progress card, the screen time goal should be displayed in brackets with 2 decimal places (currently rounded to 1 decimal place).  On 2025-04-01: The screen time goal slider in settings should use the same 15-minute step size, and the value displayed to the user should be in hours (e.g., 1.50, 1.75, etc.) instead of minutes. Project renamed from "App Blocker" to "Memento Mode" on 2025-03-28.  On 2025-04-01: The screen time goal slider in settings should use the same 15-minute step size, and the value displayed to the user should be in hours (e.g., 1.50, 1.75, etc.) instead of minutes. On the home screen, in the goal progress card, the screen time goal should be displayed in brackets with 2 decimal places (currently rounded to 1 decimal place).  On 2025-04-02: The screen time goal slider in settings should use a step size of 15 minutes (0.25 hours), and the value displayed should be in hours (e.g., 1.50, 1.75) instead of minutes. On the home screen, display the screen time goal in brackets with 2 decimal places. The preference for "What will you do with your saved time?" should be renamed to "Habits" and should retrieve and modify the user's habits from shared preferences.  The project was renamed to Memento Mode on 2025-03-28.  On 2025-04-02: The screen time goal slider in settings should use a step size of 15 minutes (0.25 hours), and the value displayed should be in hours (e.g., 1.50, 1.75) instead of minutes. On the home screen, display the screen time goal in brackets with 2 decimal places. The preference for "What will you do with your saved time?" should be renamed to "Habits" and should retrieve and modify the user's habits from shared preferences.  On 2025-04-03: Removed settings for: Manage Blocked Apps, Enable AI Coach, and Onboarding Options.  On 2025-04-03: Removed settings for Manage Blocked Apps, Enable AI Coach, and Onboarding Options.  The project was renamed to Memento Mode on 2025-03-28. On 2025-04-04: Resolved an issue where the updatePageUI function in LifetimeImpactHandler.kt was not being called. This was resolved by calling updatePageUI after the viewPager.post block in ScreentimeCalculatorActivity.kt.  On 2025-04-04: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called. This was resolved by calling `updatePageUI` after the `viewPager.post` block in `ScreentimeCalculatorActivity.kt`.  On 2025-04-04: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called.  The issue was caused by a timing problem where the view wasn't properly inflated before the function was called.  This was resolved by calling `updatePageUI` within a `viewPager.post` block in `ScreentimeCalculatorActivity.kt`.  A new premium trial countdown feature will be added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  A new premium trial countdown feature will be added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  On 2025-04-05: Resolved an issue where the updatePageUI function in LifetimeImpactHandler.kt was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging. The project was renamed to Memento Mode on 2025-03-28. On 2025-04-05: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging. The project name was changed from "App Blocker" to "Memento Mode" on 2025-03-28.  The project was renamed to Memento Mode on 2025-03-28. The onboarding flow was redesigned on 2025-03-28 to include: a splash screen, a multi-page screentime calculator, a usage report, goal setting, and habit replacement features. The home screen will be redesigned.  The project was renamed to Memento Mode on 2025-03-28. On 2025-04-05: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging. The project name was changed from App Blocker to Memento Mode on 2025-03-28.  The project name was changed from App Blocker to Memento Mode on March 28, 2025. A new premium trial countdown feature will be added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  The app will include a premium trial countdown feature on the home screen. This feature will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  The project was renamed to Memento Mode on 2025-03-28. A premium trial countdown feature will be added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  Project renamed from App Blocker to Memento Mode on 2025-03-28.  On 2025-04-05:  A new premium trial countdown feature was added to the home screen. This includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model.  On 2025-04-05: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently.  This was resolved by manually triggering page setup on navigation and adding additional logging.  On 2025-04-06: Added a close button to the PremiumActivity, styled consistently with other buttons in the application. Improved the font sizes across the PremiumActivity layout for better readability.  On 2025-04-06: Added a close button to the PremiumActivity, styled consistently with other buttons in the application. Improved the font sizes across the PremiumActivity layout for better readability.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`
The project was renamed to Memento Mode on 2025-03-28.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`.  A new premium trial countdown feature was added to the home screen on 2025-04-05. This feature includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model.  Project renamed from App Blocker to Memento Mode on 2025-03-28. The project name was changed from App Blocker to Memento Mode on March 28, 2025. A new premium trial countdown feature was added to the home screen. This feature will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  The app will include a premium trial countdown feature on the home screen. This feature will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  The project was renamed to Memento Mode on 2025-03-28. A premium trial countdown feature will be added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model.  Project renamed from App Blocker to Memento Mode on 2025-03-28.  On 2025-04-05:  A new premium trial countdown feature was added to the home screen. This includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`. The project name was changed from App Blocker to Memento Mode on March 28, 2025. A new premium trial countdown feature was added to the home screen. This will include a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users will be able to tap this message to go to a placeholder activity that describes our pricing model. The project name was changed from App Blocker to Memento Mode on March 28, 2025. The project was renamed to Memento Mode on 2025-03-28. On 2025-04-07: The home screen cards should use the same card styling as in activity_settings.xml.  A new premium trial countdown feature was added to the home screen on 2025-04-05.  This feature includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`.  A new premium trial countdown feature was added to the home screen on 2025-04-05. This feature includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model. A premium trial countdown feature was added to the home screen on 2025-04-05. This feature includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`.


The project name was changed from "App Blocker" to "Memento Mode" on March 28, 2025.  A new premium trial countdown feature was added to the home screen on 2025-04-05. This feature includes a subtle message encouraging users to upgrade to the premium version, along with a countdown of the remaining trial days and hours. Users can tap this message to go to a placeholder activity that describes our pricing model. On 2025-04-07, the home screen cards were updated to match the styling in `activity_settings.xml`.


## CODE STYLE

[Add code style guidelines here]

## FOLDER ORGANIZATION

[Add folder organization guidelines here]

## TECH STACK

[Add tech stack details here]

## PROJECT-SPECIFIC STANDARDS

[Add project-specific standards here]

## WORKFLOW & RELEASE RULES

[Add workflow and release rules here]

## REFERENCE EXAMPLES

[Add reference examples here]

## PROJECT DOCUMENTATION & CONTEXT SYSTEM

[Add project documentation and context system guidelines here]

## DEBUGGING

[Add debugging guidelines here]  On 2025-03-29, issues were identified with the coach persona selection.  Specifically, the ability to select multiple personas, the inconsistent display of the selected persona on the home screen, and the lack of a mechanism to change the persona in app settings were noted.  These issues were resolved on 2025-03-29 by implementing exclusive radio button selection for persona choice, ensuring consistent persona display across the app, and adding persona selection to app settings.  On 2025-03-29, a bug was discovered in `AiCoachSetupActivity.kt` where the `setupCoachPersonaSelection()` function prematurely returns if `viewPager.findViewWithTag<View>("page_4")` is null.  This was resolved by ensuring the view is properly inflated before calling the function. On 2025-03-29, a further issue was identified where previously selected radio buttons remained visibly selected even after a different persona was selected. This was resolved by using only the RadioButtons within the RadioGroup for selection and synchronizing their selection state with corresponding CardViews.  This involved adding hidden RadioButtons to the RadioGroup and updating the visual selection in the CardViews to reflect the RadioGroup's selection. On 2025-03-30: Resolved an issue where previously selected radio buttons in the coach persona selection remained visibly selected. This was addressed by ensuring proper synchronization between the RadioGroup selection and the visual representation in the CardViews. On 2025-03-31: Resolved an issue where the previously selected radio buttons in the coach persona selection remained visually selected. This was addressed by ensuring proper synchronization between the RadioGroup selection and the visual representation in the CardViews.  Added comprehensive logging to `AiCoachSetupActivity.kt` to track view retrieval and radio button states for debugging purposes.  On 2025-04-01: Added logging to `ScreentimeCalculatorActivity.kt` to track the saving of goal hours (now goal minutes) to SharedPreferences.  On 2025-04-01: Resolved an issue where previously selected radio buttons in the coach persona selection remained visibly selected. This was addressed by ensuring that only the RadioButtons within the RadioGroup are used for selection, and that the visual selection in the CardViews is updated to reflect the RadioGroup selection. This involved adding hidden RadioButtons within the RadioGroup and synchronizing their selection state with their corresponding CardViews.  Added comprehensive logging to `AiCoachSetupActivity.kt` to track view retrieval and radio button states for debugging purposes. Added comprehensive logging to `AiCoachSetupActivity.kt` to track view retrieval and radio button states for debugging purposes. On 2025-04-02: Added logging statements to track the retrieval and modification of habits in shared preferences.  On 2025-04-02: Resolved an issue where previously selected radio buttons in the coach persona selection remained visibly selected. This was addressed by ensuring that only the RadioButtons within the RadioGroup are used for selection, and that the visual selection in the CardViews is updated to reflect the RadioGroup selection. This involved adding hidden RadioButtons within the RadioGroup and synchronizing their selection state with their corresponding CardViews. On 2025-04-03: Resolved an issue where the goal time slider in settings did not use a step size of 15 minutes. This was resolved by using `android:stepSize="15"` in the preferences.xml file. On 2025-04-04: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called. This was resolved by calling `updatePageUI` after the `viewPager.post` block in `ScreentimeCalculatorActivity.kt`.  On 2025-04-04: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called.  The issue was caused by a timing problem where the view wasn't properly inflated before the function was called.  This was resolved by calling `updatePageUI` within a `viewPager.post` block in `ScreentimeCalculatorActivity.kt`.  On 2025-04-05: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging. On 2025-04-05: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging.  The issue in `LifetimeImpactHandler.kt` where `updatePageUI` wasn't being called consistently was resolved by manually triggering page setup on navigation and adding additional logging.  The issue in `LifetimeImpactHandler.kt` where `updatePageUI` wasn't called consistently was resolved by manually triggering page setup on navigation and adding additional logging.  Added comprehensive logging to `ScreentimeCalculatorActivity.kt` to track page setup and navigation events for debugging purposes. On 2025-04-07: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging.  On 2025-04-07: Resolved an issue where the `updatePageUI` function in `LifetimeImpactHandler.kt` was not being called consistently. This was resolved by manually triggering page setup on navigation and adding additional logging.  On 2025-04-07: The home screen cards should use the same card styling as in `activity_settings.xml`.

## FINAL DOs AND DON'Ts

- **DO:** Use radio buttons for exclusive coach persona selection. Use RadioGroup's `setOnCheckedChangeListener` in `AiCoachSetupActivity.kt` for exclusive radio button selection.  Use hidden RadioButtons within the RadioGroup and synchronize their selection with corresponding visible RadioButtons in CardViews to ensure only one persona is selected visually and functionally.
- **DO:** Ensure selected persona is consistently displayed across the app. Update `HomeFragment.kt` to load the coach persona from preferences using the correct key ("coach_persona").
- **DO:** Implement persona selection in app settings. Add a `ListPreference` for coach persona selection to `preferences.xml`, utilizing existing arrays from `arrays.xml`. Add necessary string resources for the coach persona preference in `strings.xml`. Update `SettingsFragment.kt` to handle coach persona changes, display the selected persona in the summary, and provide feedback (e.g., a toast message) upon changes.
- **DON'T:** Allow multiple persona selections.
- **DON'T:** Display inconsistent persona information.
- **DON'T:** Omit persona selection from app settings.
- **DO:** Ensure `viewPager.findViewWithTag<View>("page_4")` is not null before calling `setupCoachPersonaSelection()` in `AiCoachSetupActivity.kt`.  This can be achieved by ensuring the view is properly inflated before accessing it.  Access the view from the RecyclerView directly within `AiCoachSetupActivity.kt` using `viewPager.getChildAt(0) as? RecyclerView` and `recyclerView.findViewHolderForAdapterPosition(3)?.itemView`.
- **DO:**  Use a more robust method for accessing views in ViewPager2, considering its RecyclerView implementation.
- **DO:** Add comprehensive logging within `AiCoachSetupActivity.kt` to track view retrieval and radio button states for debugging purposes.
- **DON'T:** Rely solely on `findViewWithTag` for accessing views in `ViewPager2`.
- **DO:** Add simple vector illustrations for each coach persona to enhance visual appeal.  Source illustrations from the web.
- **DO:** Add 10-12 more habits to the habit selection page in the onboarding flow, decorating each with relevant emojis.
- **DO:** Add a screen at the end of the AI coach setup to prompt the user for their name. This should update the user's name in app preferences.
- **DO:** Integrate the initial "Welcome Back" greeting on the home screen into the AI coach's greeting to avoid redundancy.
- **DO:** Ensure proper synchronization between the RadioGroup selection and the visual representation in the CardViews for coach persona selection.  Use a function to update all visible radio buttons to reflect the selected state.
- **DO:** In `ScreentimeCalculatorActivity.kt`, store the selected goal time in minutes instead of hours as a float to improve precision and avoid casting issues.  Display the value to the user in hours, but store it internally as minutes.  Use a step size of 15 minutes (0.25 hours) for the slider.
- **DO:** Add logging statements to `ScreentimeCalculatorActivity.kt` to track the saving of goal minutes to SharedPreferences.
- **DO:** In `preferences.xml`, ensure the goal time slider uses a step size of 15 minutes (0.25 hours) and displays the value to the user in hours with two decimal places (e.g., 1.50, 1.75).
- **DO:** On the home screen, display the screen time goal in the goal progress card with two decimal places.
- **DO:** Use a step size of 15 minutes for the screen time goal slider in settings. Display the value to the user in hours (e.g., 1.50, 1.75, etc.) instead of minutes.
- **DO:** On the home screen, in the goal progress card, display the screen time goal in brackets with 2 decimal places (currently rounded to 1 decimal place).
- **DO:** The preference for "What will you do with your saved time?" should be renamed to "Habits" and should retrieve and modify the user's habits from shared preferences.
- **DO:** Remove settings for: Manage Blocked Apps, Enable AI Coach, and Onboarding Options.
- **DO:** Add a close button to the PremiumActivity, styled consistently with other buttons in the